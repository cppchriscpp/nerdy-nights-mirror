<div class="mdl-card__title"><strong>KennyB</strong> posted on 
		
			
				
				Aug 30, 2009 at 10:41:43 AM 
			
			
			
			
		
	</div><div class="mdl-card__supporting-text">
					<div class="FTQUOTE"><i>Originally posted by: <b>mewithoutYou52</b></i><br><br>You have to change background tiles in nmi.  Instead of trying to write directly to the background, instead set a flag and then look for that flag in nmi.  Then make the background change if that flag is set.  It will look for the flag every frame.</div><br><br>Do you mean something like this ? &#xA0;Or am I completely missing the point ? The &quot;Drawscore&quot; get&apos;s called when the NMI happens.&#xA0;<div><br></div><div><a href="http://nintendoage.pastebin.com/f61fb15b5" target="_blank">http://nintendoage.pastebin.com/f61fb15b5</a></div><div align="0"><br></div><div>It semi-works now. However, before I change the speed (up or down), it displays 1.&#xA0;</div><div>After I change the speed, it shoves the &quot;1&quot; one place to the right and displays the actual speed (1 to 6).</div><div>But I cant seem to find the solution for this.</div><div><br></div><div><br></div><div><img src="scraper/images/6BAC9196-CF1D-7AA0-099B9F96E7655869.jpg" original-src="http://www.NintendoAgeMedia.com/users/24/photobucket/6BAC9196-CF1D-7AA0-099B9F96E7655869.jpg"></div><div><br></div><div>Also, would it be better if I removed the highlighted pieces of codes (in the pastebin) and add a Jump after a compare (if the compare = 1) ?&#xA0;</div><div>In the below example, first it would load A with the ball speed. If it&apos;s not equal to six, it will jump to the next value (NotSix). A is still loaded with the ball speed, so there is no need to load it again ?&#xA0;</div><div><br></div><div>If the value is equal to six, the Jump is then used to skip&#xA0;unnecessary code and to prevent that the tile number stored in A get&apos;s compared with other speeds (5-1)</div><div><br></div><div>So you would get:&#xA0;</div><div><br></div><div>Drawscore:</div><div><div><ul><li>LDA ballspeedx<span class="Apple-tab-span" style="white-space: pre; ">&#xA0;</span></li><ul><li>&#xA0;&#xA0;CMP #$06 &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0;</li><li>&#xA0;&#xA0;BNE NotSix &#xA0; &#xA0;<span class="Apple-tab-span" style="white-space: pre; ">&#xA0;</span>&#xA0;&#xA0;&#xA0;<span class="Apple-tab-span" style="white-space: pre; ">&#xA0;</span></li><li>&#xA0;&#xA0;LDA #$42 &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0;&#xA0;</li><li>&#xA0;&#xA0;STA $2007 &#xA0; &#xA0; &#xA0; &#xA0;</li><li>&#xA0;&#xA0;JMP DrawScoreDone<span class="Apple-tab-span" style="white-space: pre; ">&#xA0;</span>;if the speed of the ball is six =&gt; no need to do 5-1, jump to bottom</li></ul><li>NotSix: &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0;&#xA0;</li><ul><li>&#xA0;<font class="Apple-style-span" color="#FF0000">&#xA0;LDA ballspeedx</font><span class="Apple-tab-span" style="white-space: pre; "><font class="Apple-style-span" color="#FF0000">&#xA0;</font></span><font class="Apple-style-span" color="#FF0000">&#xA0;&#xA0; &#xA0;; this rule gets deleted, because if it&apos;s not 6, no other value was stored in A</font></li><li>&#xA0;&#xA0;CMP #$05</li><li>&#xA0;&#xA0;BNE NotFive</li><li>&#xA0;&#xA0;LDA #$51</li><li>&#xA0;&#xA0;STA $2007</li><li>&#xA0;JMP DrawScoreDone</li></ul><li>NotFive:<br>.....</li><li>.....</li></ul><div>DrawScoreDone:</div></div></div><div><br></div><div><br></div><div><font class="Apple-style-span" color="#00CC00">EDIT: Problem Solved&#xA0;</font></div><div><br></div><div>I also posted my problem over at nesdev and they found the bug in my code:</div><div><br></div><div>If the speed of my ball was anything else then 1, it would load that tile (for that speed) and write it to #$2353 using $2007</div><div>Because I didn&apos;t have a CMP and BNE for the speed 1, it would load the tile for number 1, and do another write at $2007 causing the tile for &quot;1&quot; getting stored into #$2354.</div><div><br></div><div>Adding a CMP and BNE solved my problem. However they also suggested a better code to use, which I have implemented (8 lines of code instead of my 38&#xA0;<img src="/i/expressions/face-icon-small-happy.gif" style="display: none;">)</div><div><br></div><div>Thx Kevin and Brian &#xA0;for you&apos;re aid !&#xA0;</div><div><br></div>
				</div><div class="mdl-card--border"></div>