<div class="mdl-card__title"><strong>MetalSlime</strong> posted on 
		
			
				
				Dec 18, 2009 at 2:25:05 AM 
			
			
			
			
		
	</div><div class="mdl-card__supporting-text">
					<div class="FTQUOTE"><i>Originally posted by: <b>themaincamarojoe</b></i><br><br><p>How do we use the ReadController and the ReadControllerLoop to read the controller.&#xA0; According to the post, we need to write to the appropiate bit.&#xA0; So, for example, if I want one of my tiles to move up, I kow that I need to write to bit 3, or %00001000.&#xA0; </p><p style="margin: 0px; font-family: Monaco; font-style: normal; font-variant: normal; font-weight: normal; font-size: 10px; line-height: normal; font-size-adjust: none; font-stretch: normal; -x-system-font: none;"><span style="letter-spacing: 0px;">bit:&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; 7 &#xA0; &#xA0; 6 &#xA0; &#xA0; 5 &#xA0; &#xA0; 4 &#xA0; &#xA0;&#xA0;&#xA0;&#xA0;&#xA0; 3&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;2&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; 1&#xA0;&#xA0;&#xA0;&#xA0; 0</span></p><p style="margin: 0px; font-family: Monaco; font-style: normal; font-variant: normal; font-weight: normal; font-size: 10px; line-height: normal; font-size-adjust: none; font-stretch: normal; -x-system-font: none;"><span style="letter-spacing: 0px;">button: A &#xA0; &#xA0; B &#xA0; select start&#xA0; up &#xA0; down&#xA0; left right</span></p><p>I guess that if I wanted to read up I would use the following instruction.</p><p><font size="1">LDA #%00001000<br>STA button1</font></p><p>What I&apos;m confused about is where to write this?&#xA0; Do&#xA0;I use a JSR to hop to ReadControllerLoop and then write to button one?&#xA0; Before we used an instruction like this:</p><p><font size="1">ReadUp:<br>&#xA0;&#xA0; LDA $4016<br>&#xA0;&#xA0; AND #%00000001 <br>&#xA0;&#xA0; BEQ ReadUpDone<br>&#xA0;&#xA0; LDA $0200<br>&#xA0;&#xA0; SEC<br>&#xA0;&#xA0; SBC #$01<br>&#xA0;&#xA0; STA $0200<br>ReadUpDone:</font></p><p><font size="2">How do I combine these instructions to write to up?</font></p><p></p><p style="margin: 0px; font-family: Monaco; font-style: normal; font-variant: normal; font-weight: normal; font-size: 10px; line-height: normal; font-size-adjust: none; font-stretch: normal; -x-system-font: none;"><span style="letter-spacing: 0px;"></span></p></div><br>With the new ReadController routine you don&apos;t need to mess with ReadUp or ReadDown or anything like that ever again.<br><br>The new ReadController should be called once per frame.&#xA0; It reads the button states for you and stores them in a zero page variable called &quot;buttons1&quot;.&#xA0; This variable is then available for you to peek at and see which buttons were pressed.&#xA0; This is done by reading the variable, not writing.&#xA0; Any time you want to check if up is pressed, you just need to check the appropriate bit in your &quot;buttons1&quot; variable:<br><br>;check to see if up was pressed.<br>&#xA0;&#xA0;&#xA0; lda buttons1&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; ;load the current button state for controller1<br>&#xA0;&#xA0;&#xA0; and #%00001000&#xA0;&#xA0; ;isolate the bit representing &quot;up&quot;, by clearing all the other bits<br>&#xA0;&#xA0;&#xA0; beq .skip&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; ;if the result was 0, then the &quot;up&quot; bit was clear (thus not pressed), so skip the following code<br>&#xA0;&#xA0;&#xA0; ;...<br>&#xA0;&#xA0;&#xA0; ;code for moving paddle position up here<br>.skip:<br>&#xA0;&#xA0;&#xA0; ;code continues here.<br><br>Did that help?&#xA0; If anything is still unclear, please ask!<br>
				</div><div class="mdl-card--border"></div>