
					Hey Everyone,<br><br>I&apos;ve been able to figure out how to get a status bar working at the bottom of the screen using sprite 0 collision (thanks to the help of albaily and thefox, of course).&#xA0; Now I&apos;ve been experimenting with moving the status bar to the top of the screen.&#xA0; I cannot get it to work without it going all buggy.&#xA0; Here&apos;s my NMI routine:<br><br>NMI:<br>&#xA0; PHA&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; ;save registers in case of interrupt<br>&#xA0; TXA<br>&#xA0; PHA<br>&#xA0; TYA<br>&#xA0; PHA<br><br>&#xA0; LDA #$00<br>&#xA0; STA $2003&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; ; set the low byte (00) of the RAM address<br>&#xA0; LDA #$02<br>&#xA0; STA $4014&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; ; set the high byte (02) of the RAM address, start the transfer<br><br><br>&#xA0; LDA needdraw<br>&#xA0; AND #%00000001<br>&#xA0; BEQ .skipcolumns<br><br>&#xA0; JSR load_offscreen_tiles<br>&#xA0; JSR load_offscreen_attributes<br><br>.skipcolumns:<br>&#xA0; LDA needdraw<br>&#xA0; AND #%00000010<br>&#xA0; BEQ .skipscore<br>&#xA0; JSR DrawScore<br><br>.skipscore:<br>&#xA0; LDA soft_2000<br>&#xA0; STA $2000<br>&#xA0; LDA soft_2001<br>&#xA0; STA $2001<br><br>.Scrolling:<br>&#xA0; LDA $2002&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; ;reset the latch<br>&#xA0; LDA xScroll<br>&#xA0; STA $2005<br>&#xA0; LDA #$00<br>&#xA0; STA $2005<br><br>&#xA0; LDA #$00<br>&#xA0; STA sleeping<br><br>.Sprite0_testone:<br>&#xA0; BIT $2002<br>&#xA0; BVS .Sprite0_testone<br>.Sprite0_testtwo:<br>&#xA0; BIT $2002<br>&#xA0; BVC .Sprite0_testtwo<br><br>&#xA0; LDA #%10010000<br>&#xA0; STA $2000<br><br>&#xA0; LDA $2002<br>&#xA0; LDA #$00<br>&#xA0; STA $2005<br>&#xA0; STA $2005<br><br>&#xA0; PLA&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; ; restore registers<br>&#xA0; TAY<br>&#xA0; PLA<br>&#xA0; TAX<br>&#xA0; PLA<br><br>&#xA0; RTI&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; ; return from interrupt<br><br>I&apos;ve attached the full ROM with all the asm and info files in a zip with this post.&#xA0; At first I tried placing the $2000 and $2005 changes above the sprite 0 code and had it all at the beginning of NMI.&#xA0; Also, I moved my Sprite 0 coordinates (found in init_PPU.asm) to intersect the lower edge of the status bar at the top of the screen.&#xA0; For whatever reason, I thought that would work.&#xA0; Plop.&#xA0; It didn&apos;t.<br><br>Also, I&apos;ve noticed I have a problem coding controller input.&#xA0; Pushing the &quot;A&quot; and &quot;B&quot; buttons in this demo is supposed to increment/decrement that two-digit counter at the bottom by one.&#xA0; Instead, it increment/decrements by 6-12 (it changes every time).&#xA0; I&apos;m guessing it&apos;s because each time I push a button, it picks it up over the course of many frames instead of just one, and hence reads it as though I pushed the button many times instead of just one.&#xA0; Am I right?&#xA0; If so, anyone know any smooth tricks around this?&#xA0; I ran into the same problem awhile ago when I was trying to do a pause routine.<br><br>PS - Some of my comments may be incorrect in the ASM files (wrong decimal value, for instance)&#xA0;&#xA0; Sorry if anyone runs into that.<br>
				<br><p><strong>Attachment:</strong> <a no-mirror href="scraper/files/spr0_scroll.zip">spr0_scroll.zip</a></p>